new entry "Interrupt_DeflectAttacks_Rubber"
type "InterruptData"
data "DisplayName" "hc1aab303g7119g4b2bga652ga42d9a0a17ef"
data "Description" "hd42bafd2g8fbcg4be2g9da3g22002716f6e3"
data "ExtraDescription" "h1d512cd9g8e16g47c9g8c79g595a22764ffb"
data "Icon" "PassiveFeature_DeflectMissiles" // TODO: Make own icon
data "InterruptContext" "OnPreDamage"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Target,context.Observer) and IsMeleeWeaponAttack() and not HasStatus('SG_Polymorph_BeastShape') and not AnyEntityIsItem()"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,-(1d10+DexterityModifier+ClassLevel(Monk)));ApplyStatus(OBSERVER_TARGET,INTERRUPT_DEFLECT_ATTACKS_RUBBER_HIT,100,1);RestoreResource(DeflectAttacks_Rubber_Charge,1,0)"
data "Cost" "ReactionActionPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph') or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_DeflectAttacks_Rubber_Return"
type "InterruptData"
data "DisplayName" "hb303da22gf886g4a8cgb424g8120420c7787"
data "Description" "h24fb3bc6g7d17g4971g87a2ge1effd2d088f"
data "Icon" "PassiveFeature_DeflectMissiles" // TODO: Make own icon
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Target,context.Observer) and IsAttackType(AttackType.MeleeWeaponAttack) and not (IsCriticalMiss() or IsMiss()) and HasActionResource('DeflectAttacks_Rubber_Charge', 1, 0, false, false, context.Observer) and not AnyEntityIsItem()"
data "Properties" "UseSpell(SWAP,Target_Deflect_Attacks_Rubber,true,true,true,c4598bdb-fc07-40dd-a62c-90cc138bd76f);UseActionResource(OBSERVER_OBSERVER,DeflectAttacks_Rubber_Charge,1,0)"
data "Cost" "KiPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded'}) or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

// TODO: Split this into ranged and melee versions
new entry "Interrupt_DeflectSpells_Rubber"
type "InterruptData"
data "DisplayName" "he71fad74gb432g4b86g9c4fgb6e720802d97"
data "Description" "hb096ccf9g7331g4b75ga026g47824f14be09"
data "ExtraDescription" "h3251d5b0g98a3g4c58gb445gadef34ddeac0"
data "Icon" "PassiveFeature_DeflectMissiles" // TODO: Make own icon
data "InterruptContext" "OnPreDamage"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Target,context.Observer) and IsSpellAttack() and not HasStatus('SG_Polymorph_BeastShape') and not AnyEntityIsItem()"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,-(1d10+DexterityModifier+ClassLevel(Monk)));ApplyStatus(OBSERVER_TARGET,INTERRUPT_DEFLECT_SPELLS_RUBBER_HIT,100,1);RestoreResource(DeflectSpells_Rubber_Charge,1,0)"
data "Cost" "ReactionActionPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph') or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_DeflectSpells_Rubber_Return"
type "InterruptData"
data "DisplayName" "h7e94401cg2345g4030gb05agde41f808eb1a"
data "Description" "h7284371dg7fedg43dcg9c2fg4bdafe28899c"
data "Icon" "PassiveFeature_DeflectMissiles" // TODO: Make own icon
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Target,context.Observer) and IsAttackType(AttackType.RangedSpellAttack) and not (IsCriticalMiss() or IsMiss()) and HasActionResource('DeflectSpells_Rubber_Charge', 1, 0, false, false, context.Observer) and not AnyEntityIsItem()"
data "Properties" "UseSpell(SWAP,Projectile_Deflect_Spells_Rubber,true,true,true,c4598bdb-fc07-40dd-a62c-90cc138bd76f);UseActionResource(OBSERVER_OBSERVER,DeflectSpells_Rubber_Charge,1,0)"
data "Cost" "KiPoint:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded'}) or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"